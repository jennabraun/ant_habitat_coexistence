libary(dplyr)
library(dplyr)
library(ggplot2)
veg <- read.csv("raw data/vegetation.csv")
str(veg)
count(veg$month)
str(veg$month)
str(veg)
unique(veg$month)
unique(veg$Method)
unique(veg$Microsite)
unique(veg$Site)
#wow so clean already
range(veg$shrub.x)
#wow so clean already
is.na[veg$shrub.x = TRUE] <- 0
#wow so clean already
veg$shrub.x[is.na(veg$shrub.x = TRUE)] <- 0
#wow so clean already
veg$shrub.x[is.na(veg$shrub.x)] <- 0
range(veg$shrub.x)
View(veg)
View(veg)
range(veg$sum_percent)
View(veg)
veg$sampleID <- paste(veg$Site, veg$month, veg$Microsite, veg$Rep)
var <- select(veg, sampleID, 6, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
View(var)
row.names(var) <- var$sampleID
View(var)
View(cov)
veg <- read.csv("raw data/vegetation.csv")
#wow so clean already
veg$shrub.x[is.na(veg$shrub.x)] <- 0
veg$sampleID <- paste(veg$Site, veg$month, veg$Microsite, veg$Rep)
var <- select(veg, sampleID, 6, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
row.names(var) <- var$sampleID
row.names(cov) <- cov$sampleID
all.equal(rownames(var), rownames(cov))
#drop sample id from var
var <- select(var, -sampleID)
pca1<- prcomp(var)
veg$shrub.y[is.na(veg$shrub.y)] <- 0
veg$shrub.z[is.na(veg$shrub.z)] <- 0
pca1<- prcomp(var)
View(var)
pca1<- prcomp(var, na.omit = TRUE)
pca1<- prcomp(var, na.rm = TRUE)
pca1<- prcomp(var, na.action = na.omit)
pca1<- prcomp(na.omit(var))
summary(pca1)
pca1
library(ggfortify)
autoplot(pca)
autoplot(pca1)
autoplot(pca1, data = cov, color = Microsite)
autoplot(pca1, data = na.omit(cov), color = Microsite)
autoplot(pca1, loadings = TRUE)
autoplot(pca1, loadings = TRUE, loadings.label = TRUE)
autoplot(pca1, loadings = TRUE, loadings.label = TRUE, scale = 0)
autoplot(pca1, loadings = TRUE, loadings.label = TRUE)
veg <- select(veg, -16:18)
veg <- select(veg, -16,-17, -18)
var <- select(veg, sampleID, 6, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
row.names(var) <- var$sampleID
veg <- read.csv("raw data/vegetation.csv")
#wow so clean already
veg$shrub.x[is.na(veg$shrub.x)] <- 0
veg$sampleID <- paste(veg$Site, veg$month, veg$Microsite, veg$Rep)
veg <- select(veg, -16,-17, -18)
var <- select(veg, sampleID, 6, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
row.names(var) <- var$sampleID
row.names(cov) <- cov$sampleID
all.equal(rownames(var), rownames(cov))
#drop sample id from var
var <- select(var, -sampleID)
veg$shrub.y[is.na(veg$shrub.y)] <- 0
veg$shrub.z[is.na(veg$shrub.z)] <- 0
pca1<- prcomp(var)
veg <- read.csv("raw data/vegetation.csv")
veg$shrub.x[is.na(veg$shrub.x)] <- 0
veg$shrub.y[is.na(veg$shrub.y)] <- 0
veg$shrub.z[is.na(veg$shrub.z)] <- 0
veg <- select(veg, -16,-17, -18)
var <- select(veg, sampleID, 6, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
veg$sampleID <- paste(veg$Site, veg$month, veg$Microsite, veg$Rep)
veg <- select(veg, -16,-17, -18)
var <- select(veg, sampleID, 6, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
row.names(var) <- var$sampleID
row.names(cov) <- cov$sampleID
all.equal(rownames(var), rownames(cov))
#drop sample id from var
var <- select(var, -sampleID)
pca1<- prcomp(var)
View(var)
#quick PCA to display differences in vegetation
veg <- read.csv("raw data/vegetation.csv")
veg$sampleID <- paste(veg$Site, veg$month, veg$Microsite, veg$Rep)
veg$shrub.x[is.na(veg$shrub.x)] <- 0
veg$shrub.y[is.na(veg$shrub.y)] <- 0
veg$shrub.z[is.na(veg$shrub.z)] <- 0
veg <- na.omit(veg)
veg <- select(veg, -16,-17, -18)
var <- select(veg, sampleID, 6, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
row.names(var) <- var$sampleID
row.names(cov) <- cov$sampleID
all.equal(rownames(var), rownames(cov))
#drop sample id from var
var <- select(var, -sampleID)
pca1<- prcomp(var)
summary(pca1)
pca1
library(ggfortify)
autoplot(pca1, loadings = TRUE, loadings.label = TRUE)
autoplot(pca1, color = Microsite, loadings = TRUE, loadings.label = TRUE)
autoplot(pca1, color = "Microsite", loadings = TRUE, loadings.label = TRUE)
autoplot(pca1, data = cov, color = "Microsite", loadings = TRUE, loadings.label = TRUE)
View(cov)
autoplot(pca1, data = cov, colour = "Microsite", loadings = TRUE, loadings.label = TRUE)
#quick PCA to display differences in vegetation
veg <- read.csv("raw data/vegetation.csv")
veg$sampleID <- paste(veg$Site, veg$month, veg$Microsite, veg$Rep)
veg$shrub.x[is.na(veg$shrub.x)] <- 0
veg$shrub.y[is.na(veg$shrub.y)] <- 0
veg$shrub.z[is.na(veg$shrub.z)] <- 0
veg <- na.omit(veg)
veg <- select(veg, -16,-17, -18)
var <- select(veg, sampleID, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
row.names(var) <- var$sampleID
row.names(cov) <- cov$sampleID
all.equal(rownames(var), rownames(cov))
#drop sample id from var
var <- select(var, -sampleID)
pca1<- prcomp(var)
summary(pca1)
pca1
autoplot(pca1, data = cov, colour = "Microsite", loadings = TRUE, loadings.label = TRUE)
autoplot(pca1, data = cov, colour = "Microsite", loadings = TRUE, loadings.label = TRUE, scale = 0)
autoplot(pca1, data = cov, colour = "Microsite", loadings = TRUE, loadings.label = TRUE)
#quick PCA to display differences in vegetation
veg <- read.csv("raw data/vegetation.csv")
veg$sampleID <- paste(veg$Site, veg$month, veg$Microsite, veg$Rep)
veg <- rename(veg, Dry Veg = dry.veg.percent)
veg <- rename(veg, "Dry Veg" = dry.veg.percent)
#quick PCA to display differences in vegetation
veg <- read.csv("raw data/vegetation.csv")
veg$sampleID <- paste(veg$Site, veg$month, veg$Microsite, veg$Rep)
veg <- rename(veg, "Dry Veg" = dry.veg.percent, "Green Veg" = green.veg.percent, "Woody Debris" = woody.debris.percent, "Rocks" = rocks.percent, "Bare Ground" = bare.ground.percent)
veg$shrub.x[is.na(veg$shrub.x)] <- 0
veg$shrub.y[is.na(veg$shrub.y)] <- 0
veg$shrub.z[is.na(veg$shrub.z)] <- 0
veg <- na.omit(veg)
veg <- select(veg, -16,-17, -18)
var <- select(veg, sampleID, 9:13, 15)
cov <- select(veg, sampleID, 1, 2, 4)
row.names(var) <- var$sampleID
row.names(cov) <- cov$sampleID
all.equal(rownames(var), rownames(cov))
#drop sample id from var
var <- select(var, -sampleID)
pca1<- prcomp(var)
summary(pca1)
pca1
autoplot(pca1, data = cov, colour = "Microsite", loadings = TRUE, loadings.label = TRUE)
sites <- read.csv("Clean data/studysites.csv")
sites <- read.csv("Clean data/studysites.csv")
View(sites)
site <- sites$ID
site <- sites$site
coords <- data.frame(x=sites$long,y=sites$lat)
points <- SpatialPoints(coords, proj4string = CRS("+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"))
library(sf)
points <- SpatialPoints(coords, proj4string = CRS("+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"))
library(raster)
library(sp)
points <- SpatialPoints(coords, proj4string = CRS("+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"))
r <- getData("worldclim",var="bio")
r <- getData("worldclim",var="bio",res=1)
r <- getData("worldclim",var="bio",res=2.5)
r <- getData("worldclim",var="bio",res=0.5)
r <- getData("worldclim",var="bio",res=0.5, lon = sites$long, lat = sites$lat)
r <- r[[c(1,12,5)]]
names(r) <- c("Temp","Prec", "Max")
values <- extract(r,points)
chk <- cbind.data.frame(coordinates(points),values)
chk
r <- getData("worldclim",var="bio",res=0.5)
r <- getData("worldclim",var="bio",res=2.5)
r <- r[[c(1,12,5)]]
names(r) <- c("Temp","Prec", "Max")
values <- extract(r,points)
chk <- cbind.data.frame(coordinates(points),values)
chk
chk$site <- site
chk
View(points)
r <- getData("worldclim",var="bio",res=0.5, lon = sites$long[,5], lat = sites$lat[,5])
r <- getData("worldclim",var="bio",res=0.5, lon = sites[3,5], lat = sites[2,5])
r <- r[[c(1,12,5)]]
names(r) <- c("Temp","Prec", "Max")
values <- extract(r,points)
chk <- cbind.data.frame(coordinates(points),values)
chk
sites[3,5]
sites[5,3]
r <- getData("worldclim",var="bio",res=0.5, lon = sites[5,3], lat = sites[5,2])
r <- r[[c(1,12,5)]]
names(r) <- c("Temp","Prec", "Max")
values <- extract(r,points)
chk <- cbind.data.frame(coordinates(points),values)
chk
#northern sites
r <- getData("worldclim",var="bio",res=0.5, lon = sites[1,3], lat = sites[1,2])
r <- r[[c(1,12,5)]]
names(r) <- c("Temp","Prec", "Max")
values <- extract(r,points)
north <- cbind.data.frame(coordinates(points),values)
north
north$site <- site
#put together
north <- filter(north, Temp != "NA")
north
#put together
north <- filter(north, Temp != "NA")
View(north)
#put together
north <- filter(north, Temp > 0)
library(dplyr)
#put together
north <- filter(north, Temp > 0)
south <- filter(south, Temp != "NA")
south <- filter(south, Temp > 0)
#southern sites
r <- getData("worldclim",var="bio",res=0.5, lon = sites[5,3], lat = sites[5,2])
r <- r[[c(1,12,5)]]
names(r) <- c("Temp","Prec", "Max")
values <- extract(r,points)
south <- cbind.data.frame(coordinates(points),values)
south
south$site <- site
south <- filter(south, Temp > 0)
sites <- rbind(north, south)
View(sites)
sites <- mutate(sites, Temp = Temp/10)
sites <- mutate(sites, Max = Max/10)
sites <- mutate(sites, arid = Prec/(Temp+10))
write.csv(sites, "Clean data/sites_worldclim.csv")
View(sites)
